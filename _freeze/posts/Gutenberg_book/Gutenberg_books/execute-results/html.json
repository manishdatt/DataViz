{
  "hash": "772882d4a02f154d5853004db513108e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Project Gutenberg\"\nauthor: \"Manish Datt\"\ndate: \"6/3/2025\"\ndescription: \"Frequency of books in different languages.\"\nimage: \"word_cloud.png\"\ncategories: [ggplot2, wordcloud,TidyTuesday, magick]\nslug: \"2561\"\n---\n\n## TidyTuesday data for [2025-06-03](https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-06-03/readme.md)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(wordcloud)\nlibrary(RColorBrewer)\nlibrary(ISOcodes)\nlibrary(scales)\nlibrary(magick)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngutenberg_authors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_authors.csv')\ngutenberg_languages <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_languages.csv')\ngutenberg_metadata <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_metadata.csv')\ngutenberg_subjects <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_subjects.csv')\n\nglimpse(gutenberg_authors)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 26,077\nColumns: 7\n$ gutenberg_author_id <dbl> 1, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1…\n$ author              <chr> \"United States\", \"Lincoln, Abraham\", \"Henry, Patri…\n$ alias               <chr> \"U.S.A.\", NA, NA, NA, \"Dodgson, Charles Lutwidge\",…\n$ birthdate           <dbl> NA, 1809, 1736, 1849, 1832, NA, 1819, 1860, NA, 18…\n$ deathdate           <dbl> NA, 1865, 1799, 1931, 1898, NA, 1891, 1937, NA, 18…\n$ wikipedia           <chr> \"https://en.wikipedia.org/wiki/United_States\", \"ht…\n$ aliases             <chr> \"U.S.A.\", \"United States President (1861-1865)/Lin…\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(gutenberg_languages)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 76,205\nColumns: 3\n$ gutenberg_id    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…\n$ language        <chr> \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", …\n$ total_languages <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(gutenberg_metadata)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 79,491\nColumns: 8\n$ gutenberg_id        <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 11, 12, 13, 14,…\n$ title               <chr> \"The Declaration of Independence of the United Sta…\n$ author              <chr> \"Jefferson, Thomas\", \"United States\", \"Kennedy, Jo…\n$ gutenberg_author_id <dbl> 1638, 1, 1666, 3, 1, 4, NA, 3, 3, NA, 7, 7, 7, 7, …\n$ language            <chr> \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"en\", \"e…\n$ gutenberg_bookshelf <chr> \"Politics/American Revolutionary War/United States…\n$ rights              <chr> \"Public domain in the USA.\", \"Public domain in the…\n$ has_text            <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR…\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(gutenberg_subjects)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 255,312\nColumns: 3\n$ gutenberg_id <dbl> 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, …\n$ subject_type <chr> \"lcsh\", \"lcsh\", \"lcc\", \"lcc\", \"lcsh\", \"lcsh\", \"lcc\", \"lcc…\n$ subject      <chr> \"United States -- History -- Revolution, 1775-1783 -- Sou…\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlang_counts <- gutenberg_languages %>% \n  group_by(language) %>%\n  summarise(total_languages = sum(total_languages), .groups = 'drop') %>%\n  arrange(desc(total_languages)) %>% \n  left_join(ISO_639_2, by = c(\"language\" = \"Alpha_2\")) %>% \n  select(language, Name, total_languages)\nglimpse(lang_counts)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 70\nColumns: 3\n$ language        <chr> \"en\", \"fr\", \"fi\", \"de\", \"it\", \"nl\", \"es\", \"pt\", \"hu\", …\n$ Name            <chr> \"English\", \"French\", \"Finnish\", \"German\", \"Italian\", \"…\n$ total_languages <dbl> 60875, 4019, 3314, 2363, 1061, 1053, 917, 651, 610, 45…\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npng(\"word_cloud.png\", width = 4, height = 4, units = \"in\", res = 300, bg = \"black\")\np1 <- wordcloud(words = lang_counts$Name, freq = lang_counts$total_languages,\n          min.freq = 0,\n          random.order = FALSE,\n          colors = brewer.pal(9, \"Pastel1\"))\ndev.off()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\npng \n  2 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlang_counts %>% \n  filter(language != \"en\") %>% \n  arrange(desc(total_languages)) %>% \n  slice(1:10) %>% \n  ggplot(aes(x = total_languages, y =reorder(Name, total_languages))) +\n  geom_col(alpha=0) +\n  geom_text(aes(label = comma(total_languages), x=70), color = \"grey\", hjust=1) +\n  theme_minimal() +\n  scale_y_discrete(labels = function(x) paste0(x, \":\"))+\n  coord_cartesian(xlim = c(0, 100)) +\n  theme(axis.title = element_blank(),\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        axis.text.y = element_text(color = \"grey\"),\n        axis.line = element_blank(),\n        panel.grid = element_blank(),\n        plot.margin = margin(75, 0, 75, 0))\n```\n\n::: {.cell-output-display}\n![](Gutenberg_books_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"plot1.png\", width = 1.75, height = 4, units = \"in\", bg=\"black\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nimg1 <- image_read(\"word_cloud.png\")\nimg2 <- image_read(\"plot1.png\")\ncombined <- image_append(c(img1, img2), stack = FALSE)\n#image_write(combined, \"combined.png\")\n\ntitle_text <- paste(\"In Project Gutenberg, \", comma(lang_counts$total_languages[1]), \" out of \", comma(dim(gutenberg_languages)[1]), \"books are in English. The word cloud is based on the book counts in different languages, excluding English. Counts for top ten languages are shown on the right.\")\ntitle_text <- paste(strwrap(title_text, width = 75), collapse = \"\\n\")\ntitle_image <- image_blank(width = image_info(combined)$width,\n                           height = 160, # adjust height as needed\n                           color = \"black\") %>%\n  image_annotate(text = title_text,\n                 size = 40, # adjust font size\n                 color = \"grey\",\n                 gravity = \"center\")\n\nfinal_image <- image_composite(combined, title_image, offset = \"+0+0\")\nimage_write(final_image, \"combined_with_title.png\")\n```\n:::\n\n",
    "supporting": [
      "Gutenberg_books_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}